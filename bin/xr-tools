#!/usr/bin/env node

const program = require('commander')
const package = require('../package.json')
const app = require('../lib/app/index')

program
	.version(package.version)

program
	.command('app')
	.option('-i, --init <name>', '初始化一个应用')
	.option('-c, --compile', '编译应用')
	.option('-s, --start-app-name [name]', '开始的应用名称')
	.option('-t, --target-dom-id [id]', '目标dom id')
	.description('app工具')
	.action(function(options) {
		app(options)
	})

program
	.command('*')
	.action(function(env) {
		console.log('没有这个命令 "%s"', env)
	})


program.parse(process.argv)

//捕获当前进程接收到的信号（如按下了 ctrl + c)
process.on('SIGINT', function() {
	program.runningCommand && program.runningCommand.kill('SIGKILL');
	process.exit(0);
})